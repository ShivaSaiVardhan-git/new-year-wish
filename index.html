<script>
const scenes = [
  "‚ú® A new year begins‚Ä¶",
  "üéÜ With hope in every spark",
  "ü§ç Grateful for the warmth<br>with which you welcomed us",
  "üå∏ Warm New Year wishes from<br><strong>Reethamshi Family</strong>",
  "‚ú® To Rakesh & his family<br><br>Happy New Year 2026"
];

let index = 0;
let locked = false;

const textEl = document.getElementById("text");
const music = document.getElementById("music");

textEl.innerHTML = scenes[index];
textEl.classList.add("show");

document.body.addEventListener("click", (e) => {
  if (locked) return;

  // enable music on first tap
  if (music.muted) {
    music.muted = false;
    music.play();
  }

  // firework at tap position
  burstAt(e.clientX, e.clientY);

  // BLUR logic for gratitude scene
  if (index === 2 && textEl.classList.contains("blur")) {
    textEl.classList.remove("blur");
    return;
  }

  index++;
  if (index < scenes.length) {
    textEl.classList.remove("show");
    setTimeout(() => {
      textEl.innerHTML = scenes[index];
      textEl.classList.add("show");

      if (index === 2) {
        textEl.classList.add("blur");
      }

      // FINAL MASSIVE BURST + LOCK
      if (index === scenes.length - 1) {
        finalBurst();
        locked = true;
        document.querySelector(".hint").innerText = "‚ú® This wish stays ‚ú®";
      }
    }, 300);
  }
});
</script>
